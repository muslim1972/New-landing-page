<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خلفية تقنية متطورة</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --rotate-x: 0deg;
            --rotate-y: 0deg;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #020617;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: none; /* لمنع التمرير أثناء التفاعل */
        }

        #canvas-container {
            position: relative;
            width: 100%;
            height: 100vh;
            perspective: 1000px;
        }

        .content-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 400px;
            padding: 2.5rem;
            transform: translate(-50%, -50%) rotateX(var(--rotate-x)) rotateY(var(--rotate-y));
            transform-style: preserve-3d;
            text-align: center;
            color: white;
            z-index: 10;
            background: rgba(15, 23, 42, 0.7);
            border-radius: 1.5rem;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(56, 189, 248, 0.4);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: transform 0.1s ease-out;
            pointer-events: auto;
        }

        /* حاوية الأيقونات المتحركة */
        .icon-carousel {
            height: 80px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .tech-icon {
            position: absolute;
            opacity: 0;
            transform: scale(0.5) translateZ(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            fill: #38bdf8;
        }

        .tech-icon.active {
            opacity: 1;
            transform: scale(1) translateZ(50px);
        }

        h1 {
            font-size: 2.2rem;
            margin: 0;
            background: linear-gradient(90deg, #38bdf8, #818cf8, #38bdf8);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 5s linear infinite;
            transform: translateZ(30px);
        }

        @keyframes shine {
            to { background-position: 200% center; }
        }

        p {
            font-size: 1.1rem;
            color: #94a3b8;
            margin-top: 15px;
            transform: translateZ(20px);
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(56, 189, 248, 0.4);
            font-size: 0.75rem;
            z-index: 20;
            letter-spacing: 2px;
        }

        /* لابتوب يفتح ويغلق عبر CSS */
        .laptop-wrapper {
            width: 60px;
            height: 40px;
            position: relative;
        }
    </style>
</head>
<body>

<div id="canvas-container">
    <div class="content-overlay" id="card">
        <div class="icon-carousel" id="carousel">
            <!-- Robot Icon -->
            <svg class="tech-icon active" viewBox="0 0 24 24" width="60" height="60">
                <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7v1H3v-1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-1.01-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5a2.5 2.5 0 0 0 2.5 2.5A2.5 2.5 0 0 0 10 15.5 2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5Z"/>
            </svg>
            <!-- Laptop Icon -->
            <svg class="tech-icon" viewBox="0 0 24 24" width="60" height="60">
                <path d="M4 6h16v10H4V6m16 12a2 2 0 0 1 2 2H2a2 2 0 0 1 2-2h16Z"/>
            </svg>
            <!-- Code Icon -->
            <svg class="tech-icon" viewBox="0 0 24 24" width="60" height="60">
                <path d="M14.6 16.6L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4Z"/>
            </svg>
            <!-- AI/Brain Icon -->
            <svg class="tech-icon" viewBox="0 0 24 24" width="60" height="60">
                <path d="M13 3.16c-3.39.49-6 3.38-6 6.84 0 1.25.33 2.42.92 3.43L4.5 17.5l1.42 1.42 3.44-3.44c.81.33 1.68.52 2.64.52 3.46 0 6.35-2.61 6.84-6H13V3.16M11 5v6H5.16c.49-3.39 3.38-6 6.84-6"/>
            </svg>
        </div>
        <h1>هندسة الحلول الذكية</h1>
        <p>تحويل الأفكار المعقدة إلى واقع رقمي بسيط.</p>
    </div>
    <div class="controls">تفاعل ثلاثي الأبعاد • 010101</div>
</div>

<script>
    let scene, camera, renderer, particles0, particles1;
    let targetX = 0, targetY = 0;
    const card = document.getElementById('card');
    const icons = document.querySelectorAll('.tech-icon');
    let currentIcon = 0;

    function init() {
        scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x020617, 0.1);

        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 6;

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const createCharTexture = (char) => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 64; canvas.height = 64;
            ctx.fillStyle = '#38bdf8';
            ctx.font = 'Bold 45px monospace';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(char, 32, 32);
            return new THREE.CanvasTexture(canvas);
        };

        const texture0 = createCharTexture('0');
        const texture1 = createCharTexture('1');

        const geometry0 = new THREE.BufferGeometry();
        const geometry1 = new THREE.BufferGeometry();
        const pos0 = [], pos1 = [];
        const count = 1200; // تقليل العدد لزيادة الأداء والوضوح

        for (let i = 0; i < count; i++) {
            const x = (Math.random() - 0.5) * 25;
            const y = (Math.random() - 0.5) * 25;
            const z = (Math.random() - 0.5) * 25;
            if (Math.random() > 0.5) pos0.push(x, y, z);
            else pos1.push(x, y, z);
        }

        geometry0.setAttribute('position', new THREE.Float32BufferAttribute(pos0, 3));
        geometry1.setAttribute('position', new THREE.Float32BufferAttribute(pos1, 3));

        const mat0 = new THREE.PointsMaterial({ size: 0.2, map: texture0, transparent: true, opacity: 0.5, blending: THREE.AdditiveBlending, depthWrite: false });
        const mat1 = new THREE.PointsMaterial({ size: 0.2, map: texture1, transparent: true, opacity: 0.5, blending: THREE.AdditiveBlending, depthWrite: false });

        particles0 = new THREE.Points(geometry0, mat0);
        particles1 = new THREE.Points(geometry1, mat1);

        scene.add(particles0);
        scene.add(particles1);

        // تتبع الماوس واللمس
        const handleMove = (x, y) => {
            const rotY = ((x - window.innerWidth / 2) / window.innerWidth) * 40; // max 20deg
            const rotX = ((y - window.innerHeight / 2) / window.innerHeight) * -40; // max 20deg
            
            card.style.setProperty('--rotate-x', rotX + 'deg');
            card.style.setProperty('--rotate-y', rotY + 'deg');
            
            targetX = x * 0.0005;
            targetY = y * 0.0005;
        };

        window.addEventListener('mousemove', (e) => handleMove(e.clientX, e.clientY));
        window.addEventListener('touchmove', (e) => {
            if(e.touches.length > 0) {
                handleMove(e.touches[0].clientX, e.touches[0].clientY);
            }
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // دورة الأيقونات
        setInterval(() => {
            icons[currentIcon].classList.remove('active');
            currentIcon = (currentIcon + 1) % icons.length;
            icons[currentIcon].classList.add('active');
        }, 3000);

        animate();
    }

    function animate() {
        requestAnimationFrame(animate);
        const time = Date.now() * 0.0002; // سرعة أبطأ بكثير

        [particles0, particles1].forEach((p, idx) => {
            const positions = p.geometry.attributes.position.array;
            for (let i = 0; i < positions.length; i += 3) {
                // حركة هادئة جداً
                positions[i + 1] -= 0.005 + (Math.sin(time + i) * 0.002);
                if (positions[i + 1] < -12) positions[i + 1] = 12;
            }
            p.geometry.attributes.position.needsUpdate = true;
            p.rotation.y += 0.0005 * (idx + 1);
        });

        camera.position.x += (targetX - camera.position.x) * 0.02;
        camera.position.y += (-targetY - camera.position.y) * 0.02;
        camera.lookAt(scene.position);

        renderer.render(scene, camera);
    }

    init();
</script>

</body>
</html>